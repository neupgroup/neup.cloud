
{
  "entities": {
    "server": {
      "title": "Server",
      "description": "Represents a virtual private server.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the server."
        },
        "username": {
          "type": "string",
          "description": "The username for SSH connections."
        },
        "type": {
          "type": "string",
          "description": "The operating system type of the server (Linux/Windows)."
        },
        "provider": {
          "type": "string",
          "description": "The VPS provider."
        },
        "ram": {
          "type": "string",
          "description": "The amount of RAM in MB."
        },
        "storage": {
          "type": "string",
          "description": "The amount of storage in GB."
        },
        "publicIp": {
          "type": "string",
          "description": "The public IP address of the server."
        },
        "privateIp": {
          "type": "string",
          "description": "The private IP address of the server."
        },
        "privateKey": {
          "type": "string",
          "description": "The SSH private key for the server."
        }
      },
      "required": ["name", "username", "type", "provider", "ram", "storage", "publicIp"]
    },
    "error": {
      "title": "Error Log",
      "description": "Represents an application error log entry.",
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "description": "The error message."
        },
        "level": {
          "type": "string",
          "description": "The severity level of the error (e.g., ERROR, WARNING, INFO)."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "The time when the error occurred."
        },
        "source": {
          "type": "string",
          "description": "The component or part of the app where the error originated."
        },
        "stack": {
            "type": "string",
            "description": "The stack trace of the error."
        }
      },
      "required": ["message", "level", "timestamp", "source"]
    },
    "application": {
      "title": "Application",
      "description": "Represents a deployed application.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the application."
        },
        "repo": {
          "type": "string",
          "description": "The Git repository URL of the application."
        },
        "language": {
          "type": "string",
          "description": "The programming language or framework used."
        },
        "status": {
          "type": "string",
          "description": "The deployment status of the application."
        },
        "url": {
            "type": "string",
            "description": "The public URL of the application."
        },
        "serverId": {
          "type": "string",
          "description": "The ID of the server this application is deployed to."
        },
        "applicationLocation": {
          "type": "string",
          "description": "The folder/directory where the application is located on the server."
        },
        "commands": {
          "type": "object",
          "description": "The commands to manage the application.",
          "properties": {
            "start": {
              "type": "string",
              "description": "The command to start the application."
            },
            "stop": {
              "type": "string",
              "description": "The command to stop the application."
            },
            "restart": {
              "type": "string",
              "description": "The command to restart the application."
            }
          },
          "required": ["start"]
        },
        "allowNetwork": {
          "type": "boolean",
          "description": "Whether the application is allowed network access."
        },
        "allowedPorts": {
          "type": "array",
          "description": "A list of ports the application is allowed to use.",
          "items": {
            "type": "number"
          }
        }
      },
      "required": ["name", "repo", "language", "status", "applicationLocation", "commands"]
    },
    "serverLog": {
        "title": "Server Log",
        "description": "Represents a log of a command run on a server.",
        "type": "object",
        "properties": {
            "serverId": {
                "type": "string",
                "description": "The ID of the server where the command was run."
            },
            "command": {
                "type": "string",
                "description": "The command that was executed."
            },
            "output": {
                "type": "string",
                "description": "The output of the command execution."
            },
            "status": {
                "type": "string",
                "description": "The exit status of the command (e.g., 'Success', 'Error')."
            },
            "runAt": {
                "type": "string",
                "format": "date-time",
                "description": "The timestamp when the command was run."
            }
        },
        "required": ["serverId", "command", "output", "status", "runAt"]
    },
    "savedCommand": {
      "title": "Saved Command",
      "description": "Represents a reusable command that can be run on a server.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name/title of the command."
        },
        "command": {
          "type": "string",
          "description": "The shell command to be executed, which can contain variables and OS-specific blocks."
        },
        "description": {
          "type": "string",
          "description": "An optional description for the command."
        },
        "nextCommands": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "An array of savedCommand IDs to execute sequentially after this command succeeds."
        },
        "variables": {
            "type": "array",
            "description": "Dynamic variables to be filled at runtime.",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "The name of the variable inside the command string (e.g., 'appName')."
                    },
                    "title": {
                        "type": "string",
                        "description": "The user-friendly label for the input field."
                    },
                    "description": {
                        "type": "string",
                        "description": "An optional description for the variable's purpose."
                    },
                    "hint": {
                        "type": "string",
                        "description": "An optional placeholder/hint for the input field."
                    }
                },
                "required": ["name", "title"]
            }
        }
      },
      "required": ["name", "command"]
    }
  },
  "auth": {
    "providers": []
  },
  "firestore": {
    "/servers/{serverId}": {
      "schema": {
        "$ref": "#/entities/server"
      },
      "description": "Stores information about servers."
    },
    "/errors/{errorId}": {
      "schema": {
        "$ref": "#/entities/error"
      },
      "description": "Stores application error logs."
    },
    "/applications/{applicationId}": {
      "schema": {
        "$ref": "#/entities/application"
      },
      "description": "Stores information about deployed applications."
    },
    "/serverLogs/{serverLogId}": {
      "schema": {
        "$ref": "#/entities/serverLog"
      },
      "description": "Stores logs of commands run on servers."
    },
    "/savedCommands/{commandId}": {
      "schema": {
        "$ref": "#/entities/savedCommand"
      },
      "description": "Stores user-defined reusable commands."
    }
  }
}
